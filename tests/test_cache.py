# Copyright (c) 2025 Author. All rights reserved.
# Licensed under the INVALID-LICENSE-TYPE License.
# See LICENSE file in the project root for full license information.

# Copyright (c) 2025 Author.With.Dots. All rights reserved.
# Licensed under the MIT License.
# See LICENSE file in the project root for full license information.

# Copyright (c) 2025 Author_With_Underscore. All rights reserved.
# Licensed under the MIT License.
# See LICENSE file in the project root for full license information.

# Copyright (c) 2025 Author-With-Hyphen. All rights reserved.
# Licensed under the MIT License.
# See LICENSE file in the project root for full license information.

# Copyright (c) 2025 Author with spaces. All rights reserved.
# Licensed under the MIT License.
# See LICENSE file in the project root for full license information.

# Copyright (c) 2025 Author. All rights reserved.
# Licensed under the MIT License.
# See LICENSE file in the project root for full license information.

# Copyright (c) 2020-2024 Author. All rights reserved.
# Licensed under the MIT License.
# See LICENSE file in the project root for full license information.

# Copyright (c) 2024-2025 Author. All rights reserved.
# Licensed under the MIT License.
# See LICENSE file in the project root for full license information.

# Copyright (c) 2024 Author. All rights reserved.
# Licensed under the MIT License.
# See LICENSE file in the project root for full license information.

# Copyright (c) 2025 Test_Author123. All rights reserved.
# Licensed under the MIT License.
# See LICENSE file in the project root for full license information.

# Copyright (c) 2025 Organization Name. All rights reserved.
# Licensed under the MIT License.
# See LICENSE file in the project root for full license information.

# Copyright (c) 2025 Author <email@example.com>. All rights reserved.
# Licensed under the MIT License.
# See LICENSE file in the project root for full license information.

# Copyright (c) 2025 Test Author. All rights reserved.
# Licensed under the MIT License.
# See LICENSE file in the project root for full license information.

# Copyright (c) 2025 Author. All rights reserved.
# Licensed under the GPL-3.0 License.
# See LICENSE file in the project root for full license information.

# Copyright (c) 2025 Author. All rights reserved.
# Licensed under the BSD-3-Clause License.
# See LICENSE file in the project root for full license information.

# Copyright (c) 2025 Author. All rights reserved.
# Licensed under the Apache-2.0 License.
# See LICENSE file in the project root for full license information.

# Copyright (c) 2025 Author. All rights reserved.
# Licensed under the MIT License.
# See LICENSE file in the project root for full license information.

# Copyright (c) 2024-2025 Test Author. All rights reserved.
# Licensed under the MIT License.
# See LICENSE file in the project root for full license information.

# Copyright (c) 2025 Author. All rights reserved.
# Licensed under the INVALID-LICENSE-TYPE License.
# See LICENSE file in the project root for full license information.

# Copyright (c) 2025 Author.With.Dots. All rights reserved.
# Licensed under the MIT License.
# See LICENSE file in the project root for full license information.

# Copyright (c) 2025 Author_With_Underscore. All rights reserved.
# Licensed under the MIT License.
# See LICENSE file in the project root for full license information.

# Copyright (c) 2025 Author-With-Hyphen. All rights reserved.
# Licensed under the MIT License.
# See LICENSE file in the project root for full license information.

# Copyright (c) 2025 Author with spaces. All rights reserved.
# Licensed under the MIT License.
# See LICENSE file in the project root for full license information.

# Copyright (c) 2025 Author. All rights reserved.
# Licensed under the MIT License.
# See LICENSE file in the project root for full license information.

# Copyright (c) 2020-2024 Author. All rights reserved.
# Licensed under the MIT License.
# See LICENSE file in the project root for full license information.

# Copyright (c) 2024-2025 Author. All rights reserved.
# Licensed under the MIT License.
# See LICENSE file in the project root for full license information.

# Copyright (c) 2024 Author. All rights reserved.
# Licensed under the MIT License.
# See LICENSE file in the project root for full license information.

# Copyright (c) 2025 Test_Author123. All rights reserved.
# Licensed under the MIT License.
# See LICENSE file in the project root for full license information.

# Copyright (c) 2025 Organization Name. All rights reserved.
# Licensed under the MIT License.
# See LICENSE file in the project root for full license information.

# Copyright (c) 2025 Author <email@example.com>. All rights reserved.
# Licensed under the MIT License.
# See LICENSE file in the project root for full license information.

# Copyright (c) 2025 Test Author. All rights reserved.
# Licensed under the MIT License.
# See LICENSE file in the project root for full license information.

# Copyright (c) 2025 Author. All rights reserved.
# Licensed under the GPL-3.0 License.
# See LICENSE file in the project root for full license information.

# Copyright (c) 2025 Author. All rights reserved.
# Licensed under the BSD-3-Clause License.
# See LICENSE file in the project root for full license information.

# Copyright (c) 2025 Author. All rights reserved.
# Licensed under the Apache-2.0 License.
# See LICENSE file in the project root for full license information.

# Copyright (c) 2025 Author. All rights reserved.
# Licensed under the MIT License.
# See LICENSE file in the project root for full license information.

# Copyright (c) 2024-2025 Test Author. All rights reserved.
# Licensed under the MIT License.
# See LICENSE file in the project root for full license information.

# Copyright (c) 2025 Author. All rights reserved.
# Licensed under the INVALID-LICENSE-TYPE License.
# See LICENSE file in the project root for full license information.

# Copyright (c) 2025 Author.With.Dots. All rights reserved.
# Licensed under the MIT License.
# See LICENSE file in the project root for full license information.

# Copyright (c) 2025 Author_With_Underscore. All rights reserved.
# Licensed under the MIT License.
# See LICENSE file in the project root for full license information.

# Copyright (c) 2025 Author-With-Hyphen. All rights reserved.
# Licensed under the MIT License.
# See LICENSE file in the project root for full license information.

# Copyright (c) 2025 Author with spaces. All rights reserved.
# Licensed under the MIT License.
# See LICENSE file in the project root for full license information.

# Copyright (c) 2025 Author. All rights reserved.
# Licensed under the MIT License.
# See LICENSE file in the project root for full license information.

# Copyright (c) 2020-2024 Author. All rights reserved.
# Licensed under the MIT License.
# See LICENSE file in the project root for full license information.

# Copyright (c) 2024-2025 Author. All rights reserved.
# Licensed under the MIT License.
# See LICENSE file in the project root for full license information.

# Copyright (c) 2024 Author. All rights reserved.
# Licensed under the MIT License.
# See LICENSE file in the project root for full license information.

# Copyright (c) 2025 Test_Author123. All rights reserved.
# Licensed under the MIT License.
# See LICENSE file in the project root for full license information.

# Copyright (c) 2025 Organization Name. All rights reserved.
# Licensed under the MIT License.
# See LICENSE file in the project root for full license information.

# Copyright (c) 2025 Author <email@example.com>. All rights reserved.
# Licensed under the MIT License.
# See LICENSE file in the project root for full license information.

# Copyright (c) 2025 Test Author. All rights reserved.
# Licensed under the MIT License.
# See LICENSE file in the project root for full license information.

# Copyright (c) 2025 Author. All rights reserved.
# Licensed under the GPL-3.0 License.
# See LICENSE file in the project root for full license information.

# Copyright (c) 2025 Author. All rights reserved.
# Licensed under the BSD-3-Clause License.
# See LICENSE file in the project root for full license information.

# Copyright (c) 2025 Author. All rights reserved.
# Licensed under the Apache-2.0 License.
# See LICENSE file in the project root for full license information.

# Copyright (c) 2025 Author. All rights reserved.
# Licensed under the MIT License.
# See LICENSE file in the project root for full license information.

# Copyright (c) 2024-2025 Test Author. All rights reserved.
# Licensed under the MIT License.
# See LICENSE file in the project root for full license information.

# Copyright (c) 2025 Author. All rights reserved.
# Licensed under the INVALID-LICENSE-TYPE License.
# See LICENSE file in the project root for full license information.

# Copyright (c) 2025 Author.With.Dots. All rights reserved.
# Licensed under the MIT License.
# See LICENSE file in the project root for full license information.

# Copyright (c) 2025 Author_With_Underscore. All rights reserved.
# Licensed under the MIT License.
# See LICENSE file in the project root for full license information.

# Copyright (c) 2025 Author-With-Hyphen. All rights reserved.
# Licensed under the MIT License.
# See LICENSE file in the project root for full license information.

# Copyright (c) 2025 Author with spaces. All rights reserved.
# Licensed under the MIT License.
# See LICENSE file in the project root for full license information.

# Copyright (c) 2025 Author. All rights reserved.
# Licensed under the MIT License.
# See LICENSE file in the project root for full license information.

# Copyright (c) 2020-2024 Author. All rights reserved.
# Licensed under the MIT License.
# See LICENSE file in the project root for full license information.

# Copyright (c) 2024-2025 Author. All rights reserved.
# Licensed under the MIT License.
# See LICENSE file in the project root for full license information.

# Copyright (c) 2024 Author. All rights reserved.
# Licensed under the MIT License.
# See LICENSE file in the project root for full license information.

# Copyright (c) 2025 Test_Author123. All rights reserved.
# Licensed under the MIT License.
# See LICENSE file in the project root for full license information.

# Copyright (c) 2025 Organization Name. All rights reserved.
# Licensed under the MIT License.
# See LICENSE file in the project root for full license information.

# Copyright (c) 2025 Author <email@example.com>. All rights reserved.
# Licensed under the MIT License.
# See LICENSE file in the project root for full license information.

# Copyright (c) 2025 Test Author. All rights reserved.
# Licensed under the MIT License.
# See LICENSE file in the project root for full license information.

# Copyright (c) 2025 Author. All rights reserved.
# Licensed under the GPL-3.0 License.
# See LICENSE file in the project root for full license information.

# Copyright (c) 2025 Author. All rights reserved.
# Licensed under the BSD-3-Clause License.
# See LICENSE file in the project root for full license information.

# Copyright (c) 2025 Author. All rights reserved.
# Licensed under the Apache-2.0 License.
# See LICENSE file in the project root for full license information.

# Copyright (c) 2025 Author. All rights reserved.
# Licensed under the MIT License.
# See LICENSE file in the project root for full license information.

# Copyright (c) 2024-2025 Test Author. All rights reserved.
# Licensed under the MIT License.
# See LICENSE file in the project root for full license information.

# Copyright (c) 2025 Author. All rights reserved.
# Licensed under the INVALID-LICENSE-TYPE License.
# See LICENSE file in the project root for full license information.

# Copyright (c) 2025 Author.With.Dots. All rights reserved.
# Licensed under the MIT License.
# See LICENSE file in the project root for full license information.

# Copyright (c) 2025 Author_With_Underscore. All rights reserved.
# Licensed under the MIT License.
# See LICENSE file in the project root for full license information.

# Copyright (c) 2025 Author-With-Hyphen. All rights reserved.
# Licensed under the MIT License.
# See LICENSE file in the project root for full license information.

# Copyright (c) 2025 Author with spaces. All rights reserved.
# Licensed under the MIT License.
# See LICENSE file in the project root for full license information.

# Copyright (c) 2025 Author. All rights reserved.
# Licensed under the MIT License.
# See LICENSE file in the project root for full license information.

# Copyright (c) 2020-2024 Author. All rights reserved.
# Licensed under the MIT License.
# See LICENSE file in the project root for full license information.

# Copyright (c) 2024-2025 Author. All rights reserved.
# Licensed under the MIT License.
# See LICENSE file in the project root for full license information.

# Copyright (c) 2024 Author. All rights reserved.
# Licensed under the MIT License.
# See LICENSE file in the project root for full license information.

# Copyright (c) 2025 Test_Author123. All rights reserved.
# Licensed under the MIT License.
# See LICENSE file in the project root for full license information.

# Copyright (c) 2025 Organization Name. All rights reserved.
# Licensed under the MIT License.
# See LICENSE file in the project root for full license information.

# Copyright (c) 2025 Author <email@example.com>. All rights reserved.
# Licensed under the MIT License.
# See LICENSE file in the project root for full license information.

# Copyright (c) 2025 Test Author. All rights reserved.
# Licensed under the MIT License.
# See LICENSE file in the project root for full license information.

# Copyright (c) 2025 Author. All rights reserved.
# Licensed under the GPL-3.0 License.
# See LICENSE file in the project root for full license information.

# Copyright (c) 2025 Author. All rights reserved.
# Licensed under the BSD-3-Clause License.
# See LICENSE file in the project root for full license information.

# Copyright (c) 2025 Author. All rights reserved.
# Licensed under the Apache-2.0 License.
# See LICENSE file in the project root for full license information.

# Copyright (c) 2025 Author. All rights reserved.
# Licensed under the MIT License.
# See LICENSE file in the project root for full license information.

# Copyright (c) 2024-2025 Test Author. All rights reserved.
# Licensed under the MIT License.
# See LICENSE file in the project root for full license information.

# Copyright (c) 2025 Author. All rights reserved.
# Licensed under the INVALID-LICENSE-TYPE License.
# See LICENSE file in the project root for full license information.

# Copyright (c) 2025 Author.With.Dots. All rights reserved.
# Licensed under the MIT License.
# See LICENSE file in the project root for full license information.

# Copyright (c) 2025 Author_With_Underscore. All rights reserved.
# Licensed under the MIT License.
# See LICENSE file in the project root for full license information.

# Copyright (c) 2025 Author-With-Hyphen. All rights reserved.
# Licensed under the MIT License.
# See LICENSE file in the project root for full license information.

# Copyright (c) 2025 Author with spaces. All rights reserved.
# Licensed under the MIT License.
# See LICENSE file in the project root for full license information.

# Copyright (c) 2025 Author. All rights reserved.
# Licensed under the MIT License.
# See LICENSE file in the project root for full license information.

# Copyright (c) 2020-2024 Author. All rights reserved.
# Licensed under the MIT License.
# See LICENSE file in the project root for full license information.

# Copyright (c) 2024-2025 Author. All rights reserved.
# Licensed under the MIT License.
# See LICENSE file in the project root for full license information.

# Copyright (c) 2024 Author. All rights reserved.
# Licensed under the MIT License.
# See LICENSE file in the project root for full license information.

# Copyright (c) 2025 Test_Author123. All rights reserved.
# Licensed under the MIT License.
# See LICENSE file in the project root for full license information.

# Copyright (c) 2025 Organization Name. All rights reserved.
# Licensed under the MIT License.
# See LICENSE file in the project root for full license information.

# Copyright (c) 2025 Author <email@example.com>. All rights reserved.
# Licensed under the MIT License.
# See LICENSE file in the project root for full license information.

# Copyright (c) 2025 Test Author. All rights reserved.
# Licensed under the MIT License.
# See LICENSE file in the project root for full license information.

# Copyright (c) 2025 Author. All rights reserved.
# Licensed under the GPL-3.0 License.
# See LICENSE file in the project root for full license information.

# Copyright (c) 2025 Author. All rights reserved.
# Licensed under the BSD-3-Clause License.
# See LICENSE file in the project root for full license information.

# Copyright (c) 2025 Author. All rights reserved.
# Licensed under the Apache-2.0 License.
# See LICENSE file in the project root for full license information.

# Copyright (c) 2025 Author. All rights reserved.
# Licensed under the MIT License.
# See LICENSE file in the project root for full license information.

# Copyright (c) 2024-2025 Test Author. All rights reserved.
# Licensed under the MIT License.
# See LICENSE file in the project root for full license information.

# Copyright (c) 2025 Author. All rights reserved.
# Licensed under the INVALID-LICENSE-TYPE License.
# See LICENSE file in the project root for full license information.

# Copyright (c) 2025 Author.With.Dots. All rights reserved.
# Licensed under the MIT License.
# See LICENSE file in the project root for full license information.

# Copyright (c) 2025 Author_With_Underscore. All rights reserved.
# Licensed under the MIT License.
# See LICENSE file in the project root for full license information.

# Copyright (c) 2025 Author-With-Hyphen. All rights reserved.
# Licensed under the MIT License.
# See LICENSE file in the project root for full license information.

# Copyright (c) 2025 Author with spaces. All rights reserved.
# Licensed under the MIT License.
# See LICENSE file in the project root for full license information.

# Copyright (c) 2025 Author. All rights reserved.
# Licensed under the MIT License.
# See LICENSE file in the project root for full license information.

# Copyright (c) 2020-2024 Author. All rights reserved.
# Licensed under the MIT License.
# See LICENSE file in the project root for full license information.

# Copyright (c) 2024-2025 Author. All rights reserved.
# Licensed under the MIT License.
# See LICENSE file in the project root for full license information.

# Copyright (c) 2024 Author. All rights reserved.
# Licensed under the MIT License.
# See LICENSE file in the project root for full license information.

# Copyright (c) 2025 Test_Author123. All rights reserved.
# Licensed under the MIT License.
# See LICENSE file in the project root for full license information.

# Copyright (c) 2025 Organization Name. All rights reserved.
# Licensed under the MIT License.
# See LICENSE file in the project root for full license information.

# Copyright (c) 2025 Author <email@example.com>. All rights reserved.
# Licensed under the MIT License.
# See LICENSE file in the project root for full license information.

# Copyright (c) 2025 Test Author. All rights reserved.
# Licensed under the MIT License.
# See LICENSE file in the project root for full license information.

# Copyright (c) 2025 Author. All rights reserved.
# Licensed under the GPL-3.0 License.
# See LICENSE file in the project root for full license information.

# Copyright (c) 2025 Author. All rights reserved.
# Licensed under the BSD-3-Clause License.
# See LICENSE file in the project root for full license information.

# Copyright (c) 2025 Author. All rights reserved.
# Licensed under the Apache-2.0 License.
# See LICENSE file in the project root for full license information.

# Copyright (c) 2025 Author. All rights reserved.
# Licensed under the MIT License.
# See LICENSE file in the project root for full license information.

# Copyright (c) 2024-2025 Test Author. All rights reserved.
# Licensed under the MIT License.
# See LICENSE file in the project root for full license information.

# Copyright (c) 2025 Author. All rights reserved.
# Licensed under the INVALID-LICENSE-TYPE License.
# See LICENSE file in the project root for full license information.

# Copyright (c) 2025 Author.With.Dots. All rights reserved.
# Licensed under the MIT License.
# See LICENSE file in the project root for full license information.

# Copyright (c) 2025 Author_With_Underscore. All rights reserved.
# Licensed under the MIT License.
# See LICENSE file in the project root for full license information.

# Copyright (c) 2025 Author-With-Hyphen. All rights reserved.
# Licensed under the MIT License.
# See LICENSE file in the project root for full license information.

# Copyright (c) 2025 Author with spaces. All rights reserved.
# Licensed under the MIT License.
# See LICENSE file in the project root for full license information.

# Copyright (c) 2025 Author. All rights reserved.
# Licensed under the MIT License.
# See LICENSE file in the project root for full license information.

# Copyright (c) 2020-2024 Author. All rights reserved.
# Licensed under the MIT License.
# See LICENSE file in the project root for full license information.

# Copyright (c) 2024-2025 Author. All rights reserved.
# Licensed under the MIT License.
# See LICENSE file in the project root for full license information.

# Copyright (c) 2024 Author. All rights reserved.
# Licensed under the MIT License.
# See LICENSE file in the project root for full license information.

# Copyright (c) 2025 Test_Author123. All rights reserved.
# Licensed under the MIT License.
# See LICENSE file in the project root for full license information.

# Copyright (c) 2025 Organization Name. All rights reserved.
# Licensed under the MIT License.
# See LICENSE file in the project root for full license information.

# Copyright (c) 2025 Author <email@example.com>. All rights reserved.
# Licensed under the MIT License.
# See LICENSE file in the project root for full license information.

# Copyright (c) 2025 Test Author. All rights reserved.
# Licensed under the MIT License.
# See LICENSE file in the project root for full license information.

# Copyright (c) 2025 Author. All rights reserved.
# Licensed under the GPL-3.0 License.
# See LICENSE file in the project root for full license information.

# Copyright (c) 2025 Author. All rights reserved.
# Licensed under the BSD-3-Clause License.
# See LICENSE file in the project root for full license information.

# Copyright (c) 2025 Author. All rights reserved.
# Licensed under the Apache-2.0 License.
# See LICENSE file in the project root for full license information.

# Copyright (c) 2025 Author. All rights reserved.
# Licensed under the MIT License.
# See LICENSE file in the project root for full license information.

# Copyright (c) 2024-2025 Test Author. All rights reserved.
# Licensed under the MIT License.
# See LICENSE file in the project root for full license information.

# Copyright (c) 2025 Author. All rights reserved.
# Licensed under the INVALID-LICENSE-TYPE License.
# See LICENSE file in the project root for full license information.

# Copyright (c) 2025 Author.With.Dots. All rights reserved.
# Licensed under the MIT License.
# See LICENSE file in the project root for full license information.

# Copyright (c) 2025 Author_With_Underscore. All rights reserved.
# Licensed under the MIT License.
# See LICENSE file in the project root for full license information.

# Copyright (c) 2025 Author-With-Hyphen. All rights reserved.
# Licensed under the MIT License.
# See LICENSE file in the project root for full license information.

# Copyright (c) 2025 Author with spaces. All rights reserved.
# Licensed under the MIT License.
# See LICENSE file in the project root for full license information.

# Copyright (c) 2025 Author. All rights reserved.
# Licensed under the MIT License.
# See LICENSE file in the project root for full license information.

# Copyright (c) 2015 Author. All rights reserved.
# Licensed under the MIT License.
# See LICENSE file in the project root for full license information.

# Copyright (c) 2020-2024 Author. All rights reserved.
# Licensed under the MIT License.
# See LICENSE file in the project root for full license information.

# Copyright (c) 2024-2025 Author. All rights reserved.
# Licensed under the MIT License.
# See LICENSE file in the project root for full license information.

# Copyright (c) 2024 Author. All rights reserved.
# Licensed under the MIT License.
# See LICENSE file in the project root for full license information.

# Copyright (c) 2025 Test_Author123. All rights reserved.
# Licensed under the MIT License.
# See LICENSE file in the project root for full license information.

# Copyright (c) 2025 Organization Name. All rights reserved.
# Licensed under the MIT License.
# See LICENSE file in the project root for full license information.

# Copyright (c) 2025 Author <email@example.com>. All rights reserved.
# Licensed under the MIT License.
# See LICENSE file in the project root for full license information.

# Copyright (c) 2025 Test Author. All rights reserved.
# Licensed under the MIT License.
# See LICENSE file in the project root for full license information.

# Copyright (c) 2025 Author. All rights reserved.
# Licensed under the GPL-3.0 License.
# See LICENSE file in the project root for full license information.

# Copyright (c) 2025 Author. All rights reserved.
# Licensed under the BSD-3-Clause License.
# See LICENSE file in the project root for full license information.

# Copyright (c) 2025 Author. All rights reserved.
# Licensed under the Apache-2.0 License.
# See LICENSE file in the project root for full license information.

# Copyright (c) 2025 Author. All rights reserved.
# Licensed under the MIT License.
# See LICENSE file in the project root for full license information.

# Copyright (c) 2024-2025 Test Author. All rights reserved.
# Licensed under the MIT License.
# See LICENSE file in the project root for full license information.

# Copyright (c) 2025 Author. All rights reserved.
# Licensed under the INVALID-LICENSE-TYPE License.
# See LICENSE file in the project root for full license information.

# Copyright (c) 2025 Author.With.Dots. All rights reserved.
# Licensed under the MIT License.
# See LICENSE file in the project root for full license information.

# Copyright (c) 2025 Author_With_Underscore. All rights reserved.
# Licensed under the MIT License.
# See LICENSE file in the project root for full license information.

# Copyright (c) 2025 Author-With-Hyphen. All rights reserved.
# Licensed under the MIT License.
# See LICENSE file in the project root for full license information.

# Copyright (c) 2025 Author with spaces. All rights reserved.
# Licensed under the MIT License.
# See LICENSE file in the project root for full license information.

# Copyright (c) 2025 Author. All rights reserved.
# Licensed under the MIT License.
# See LICENSE file in the project root for full license information.

# Copyright (c) 2015 Author. All rights reserved.
# Licensed under the MIT License.
# See LICENSE file in the project root for full license information.

# Copyright (c) 2020-2024 Author. All rights reserved.
# Licensed under the MIT License.
# See LICENSE file in the project root for full license information.

# Copyright (c) 2024-2025 Author. All rights reserved.
# Licensed under the MIT License.
# See LICENSE file in the project root for full license information.

# Copyright (c) 2024 Author. All rights reserved.
# Licensed under the MIT License.
# See LICENSE file in the project root for full license information.

# Copyright (c) 2025 Test_Author123. All rights reserved.
# Licensed under the MIT License.
# See LICENSE file in the project root for full license information.

# Copyright (c) 2025 Organization Name. All rights reserved.
# Licensed under the MIT License.
# See LICENSE file in the project root for full license information.

# Copyright (c) 2025 Author <email@example.com>. All rights reserved.
# Licensed under the MIT License.
# See LICENSE file in the project root for full license information.

# Copyright (c) 2025 Test Author. All rights reserved.
# Licensed under the MIT License.
# See LICENSE file in the project root for full license information.

# Copyright (c) 2025 Author. All rights reserved.
# Licensed under the GPL-3.0 License.
# See LICENSE file in the project root for full license information.

# Copyright (c) 2025 Author. All rights reserved.
# Licensed under the BSD-3-Clause License.
# See LICENSE file in the project root for full license information.

# Copyright (c) 2025 Author. All rights reserved.
# Licensed under the Apache-2.0 License.
# See LICENSE file in the project root for full license information.

# Copyright (c) 2025 Author. All rights reserved.
# Licensed under the MIT License.
# See LICENSE file in the project root for full license information.

# Copyright (c) 2024-2025 Test Author. All rights reserved.
# Licensed under the MIT License.
# See LICENSE file in the project root for full license information.

# Copyright (c) 2025 Author. All rights reserved.
# Licensed under the INVALID-LICENSE-TYPE License.
# See LICENSE file in the project root for full license information.

# Copyright (c) 2025 Author.With.Dots. All rights reserved.
# Licensed under the MIT License.
# See LICENSE file in the project root for full license information.

# Copyright (c) 2025 Author_With_Underscore. All rights reserved.
# Licensed under the MIT License.
# See LICENSE file in the project root for full license information.

# Copyright (c) 2025 Author-With-Hyphen. All rights reserved.
# Licensed under the MIT License.
# See LICENSE file in the project root for full license information.

# Copyright (c) 2025 Author with spaces. All rights reserved.
# Licensed under the MIT License.
# See LICENSE file in the project root for full license information.

# Copyright (c) 2025 Author. All rights reserved.
# Licensed under the MIT License.
# See LICENSE file in the project root for full license information.

# Copyright (c) 2015 Author. All rights reserved.
# Licensed under the MIT License.
# See LICENSE file in the project root for full license information.

# Copyright (c) 2020-2024 Author. All rights reserved.
# Licensed under the MIT License.
# See LICENSE file in the project root for full license information.

# Copyright (c) 2024-2025 Author. All rights reserved.
# Licensed under the MIT License.
# See LICENSE file in the project root for full license information.

# Copyright (c) 2024 Author. All rights reserved.
# Licensed under the MIT License.
# See LICENSE file in the project root for full license information.

# Copyright (c) 2025 Test_Author123. All rights reserved.
# Licensed under the MIT License.
# See LICENSE file in the project root for full license information.

# Copyright (c) 2025 Organization Name. All rights reserved.
# Licensed under the MIT License.
# See LICENSE file in the project root for full license information.

# Copyright (c) 2025 Author <email@example.com>. All rights reserved.
# Licensed under the MIT License.
# See LICENSE file in the project root for full license information.

# Copyright (c) 2025 Test Author. All rights reserved.
# Licensed under the MIT License.
# See LICENSE file in the project root for full license information.

# Copyright (c) 2025 Author. All rights reserved.
# Licensed under the GPL-3.0 License.
# See LICENSE file in the project root for full license information.

# Copyright (c) 2025 Author. All rights reserved.
# Licensed under the BSD-3-Clause License.
# See LICENSE file in the project root for full license information.

# Copyright (c) 2025 Author. All rights reserved.
# Licensed under the Apache-2.0 License.
# See LICENSE file in the project root for full license information.

# Copyright (c) 2025 Author. All rights reserved.
# Licensed under the MIT License.
# See LICENSE file in the project root for full license information.

# Copyright (c) 2024-2025 Test Author. All rights reserved.
# Licensed under the MIT License.
# See LICENSE file in the project root for full license information.

import time
from datetime import datetime, timedelta

from codekeeper.infra.cache import CacheEntry, CacheStats, HashCache


class TestHashCache:
    def test_init_creates_database(self, tmp_path):
        cache = HashCache(cache_dir=tmp_path)

        assert cache.db_path.exists()
        assert cache.db_path.suffix == ".db"

    def test_init_creates_cache_directory(self, tmp_path):
        cache_dir = tmp_path / "nested" / "cache"
        cache = HashCache(cache_dir=cache_dir)

        assert cache.cache_dir.exists()

    def test_set_and_get(self, tmp_path):
        cache = HashCache(cache_dir=tmp_path)

        cache.set(
            file_path="/test/file.py",
            file_hash="abc123",
            file_size=100,
            mtime=1234567890.0,
        )

        entry = cache.get("/test/file.py")

        assert entry is not None
        assert entry.file_path == "/test/file.py"
        assert entry.file_hash == "abc123"
        assert entry.file_size == 100
        assert entry.mtime == 1234567890.0

    def test_get_hash_valid(self, tmp_path):
        cache = HashCache(cache_dir=tmp_path)

        cache.set(
            file_path="/test/file.py",
            file_hash="hash123",
            file_size=100,
            mtime=1234567890.0,
        )

        result = cache.get_hash(
            file_path="/test/file.py",
            current_mtime=1234567890.0,
            current_size=100,
        )

        assert result == "hash123"

    def test_get_hash_invalid_mtime(self, tmp_path):
        cache = HashCache(cache_dir=tmp_path)

        cache.set(
            file_path="/test/file.py",
            file_hash="hash123",
            file_size=100,
            mtime=1234567890.0,
        )

        result = cache.get_hash(
            file_path="/test/file.py",
            current_mtime=9999999999.0,
            current_size=100,
        )

        assert result is None

    def test_get_hash_invalid_size(self, tmp_path):
        cache = HashCache(cache_dir=tmp_path)

        cache.set(
            file_path="/test/file.py",
            file_hash="hash123",
            file_size=100,
            mtime=1234567890.0,
        )

        result = cache.get_hash(
            file_path="/test/file.py",
            current_mtime=1234567890.0,
            current_size=999,
        )

        assert result is None

    def test_get_hash_not_found(self, tmp_path):
        cache = HashCache(cache_dir=tmp_path)

        result = cache.get_hash(
            file_path="/nonexistent/file.py",
            current_mtime=1234567890.0,
            current_size=100,
        )

        assert result is None

    def test_delete_existing(self, tmp_path):
        cache = HashCache(cache_dir=tmp_path)

        cache.set(
            file_path="/test/file.py",
            file_hash="hash123",
            file_size=100,
            mtime=1234567890.0,
        )

        result = cache.delete("/test/file.py")

        assert result is True
        assert cache.get("/test/file.py") is None

    def test_delete_not_found(self, tmp_path):
        cache = HashCache(cache_dir=tmp_path)

        result = cache.delete("/nonexistent/file.py")

        assert result is False

    def test_clear(self, tmp_path):
        cache = HashCache(cache_dir=tmp_path)

        cache.set("/test/file1.py", "hash1", 100, 1234567890.0)
        cache.set("/test/file2.py", "hash2", 200, 1234567890.0)
        cache.set("/test/file3.py", "hash3", 300, 1234567890.0)

        count = cache.clear()

        assert count == 3
        assert cache.get("/test/file1.py") is None
        assert cache.get("/test/file2.py") is None
        assert cache.get("/test/file3.py") is None

    def test_cleanup_old_entries(self, tmp_path):
        cache = HashCache(cache_dir=tmp_path)

        old_date = (datetime.now() - timedelta(days=60)).isoformat()
        recent_date = datetime.now().isoformat()

        with cache._get_connection() as conn:
            conn.execute(
                """
                INSERT OR REPLACE INTO file_hashes
                (file_path, file_hash, file_size, mtime, cached_at)
                VALUES (?, ?, ?, ?, ?)
                """,
                ("/old/file.py", "hash1", 100, 1234567890.0, old_date),
            )
            conn.execute(
                """
                INSERT OR REPLACE INTO file_hashes
                (file_path, file_hash, file_size, mtime, cached_at)
                VALUES (?, ?, ?, ?, ?)
                """,
                ("/recent/file.py", "hash2", 200, 1234567890.0, recent_date),
            )
            conn.commit()

        count = cache.cleanup(max_age_days=30)

        assert count == 1
        assert cache.get("/old/file.py") is None
        assert cache.get("/recent/file.py") is not None

    def test_get_stats(self, tmp_path):
        cache = HashCache(cache_dir=tmp_path)

        file1 = tmp_path / "file1.py"
        file1.write_text("content1")
        file2 = tmp_path / "file2.py"
        file2.write_text("content2")

        mtime1 = file1.stat().st_mtime
        size1 = file1.stat().st_size
        mtime2 = file2.stat().st_mtime
        size2 = file2.stat().st_size

        cache.set(str(file1), "hash1", size1, mtime1)
        cache.set(str(file2), "hash2", size2, mtime2)

        stats = cache.get_stats()

        assert stats.total_entries == 2
        assert stats.valid_entries == 2
        assert stats.stale_entries == 0

    def test_verify_integrity_ok(self, tmp_path):
        cache = HashCache(cache_dir=tmp_path)

        cache.set("/test/file.py", "hash", 100, 1234567890.0)

        result = cache.verify_integrity()

        assert result is True

    def test_update_existing_entry(self, tmp_path):
        cache = HashCache(cache_dir=tmp_path)

        cache.set("/test/file.py", "hash1", 100, 1234567890.0)
        cache.set("/test/file.py", "hash2", 200, 9999999999.0)

        entry = cache.get("/test/file.py")

        assert entry is not None
        assert entry.file_hash == "hash2"
        assert entry.file_size == 200

    def test_multiple_entries(self, tmp_path):
        cache = HashCache(cache_dir=tmp_path)

        for i in range(100):
            cache.set(f"/test/file{i}.py", f"hash{i}", i * 100, 1234567890.0 + i)

        stats = cache.get_stats()

        assert stats.total_entries == 100


class TestCacheEntry:
    def test_cache_entry_creation(self):
        now = datetime.now()
        entry = CacheEntry(
            file_path="/test/file.py",
            file_hash="abc123",
            file_size=100,
            mtime=1234567890.0,
            cached_at=now,
        )

        assert entry.file_path == "/test/file.py"
        assert entry.file_hash == "abc123"
        assert entry.file_size == 100
        assert entry.mtime == 1234567890.0
        assert entry.cached_at == now


class TestHashCacheIncrementalProcessing:
    def test_is_changed_returns_true_for_new_file(self, tmp_path):
        cache = HashCache(cache_dir=tmp_path)
        test_file = tmp_path / "new_file.py"
        test_file.write_text("new content")

        result = cache.is_changed(
            str(test_file),
            test_file.stat().st_mtime,
            test_file.stat().st_size,
        )

        assert result is True

    def test_is_changed_returns_true_when_mtime_changed(self, tmp_path):
        cache = HashCache(cache_dir=tmp_path)
        test_file = tmp_path / "test.py"
        test_file.write_text("content")
        time.sleep(0.01)
        original_mtime = test_file.stat().st_mtime
        original_size = test_file.stat().st_size

        cache.set(str(test_file), "hash123", original_size, original_mtime)

        test_file.write_text("modified content")
        time.sleep(0.01)
        new_mtime = test_file.stat().st_mtime

        result = cache.is_changed(str(test_file), new_mtime, original_size)

        assert result is True

    def test_is_changed_returns_false_when_unchanged(self, tmp_path):
        cache = HashCache(cache_dir=tmp_path)
        test_file = tmp_path / "test.py"
        test_file.write_text("content")
        original_mtime = test_file.stat().st_mtime
        original_size = test_file.stat().st_size

        cache.set(str(test_file), "hash123", original_size, original_mtime)

        result = cache.is_changed(str(test_file), original_mtime, original_size)

        assert result is False

    def test_get_or_compute_hash_returns_cached_when_unchanged(self, tmp_path):
        cache = HashCache(cache_dir=tmp_path)
        test_file = tmp_path / "test.py"
        test_file.write_text("content")
        original_mtime = test_file.stat().st_mtime
        original_size = test_file.stat().st_size

        def mock_hash_func(path):
            return "mocked_hash"

        cache.set(str(test_file), "original_hash", original_size, original_mtime)

        file_hash, was_cached = cache.get_or_compute_hash(
            str(test_file), compute_func=mock_hash_func
        )

        assert file_hash == "original_hash"
        assert was_cached is True

    def test_get_or_compute_hash_computes_when_changed(self, tmp_path):
        cache = HashCache(cache_dir=tmp_path)
        test_file = tmp_path / "test.py"
        test_file.write_text("content")
        original_mtime = test_file.stat().st_mtime
        original_size = test_file.stat().st_size

        cache.set(str(test_file), "old_hash", original_size, original_mtime)

        test_file.write_text("new content")
        time.sleep(0.01)

        file_hash, was_cached = cache.get_or_compute_hash(str(test_file))

        assert was_cached is False
        entry = cache.get(str(test_file))
        assert entry.file_hash == file_hash

    def test_get_or_compute_hash_returns_empty_for_nonexistent(self, tmp_path):
        cache = HashCache(cache_dir=tmp_path)

        file_hash, was_cached = cache.get_or_compute_hash("/nonexistent/file.py")

        assert file_hash == ""
        assert was_cached is False

    def test_batch_check_returns_empty_for_nonexistent_files(self, tmp_path):
        cache = HashCache(cache_dir=tmp_path)

        results = cache.batch_check(["/nonexistent/file1.py", "/nonexistent/file2.py"])

        assert results["/nonexistent/file1.py"] == ("", False)
        assert results["/nonexistent/file2.py"] == ("", False)

    def test_batch_check_returns_cached_for_unchanged_files(self, tmp_path):
        cache = HashCache(cache_dir=tmp_path)

        file1 = tmp_path / "file1.py"
        file1.write_text("content1")
        file2 = tmp_path / "file2.py"
        file2.write_text("content2")

        mtime1 = file1.stat().st_mtime
        size1 = file1.stat().st_size
        mtime2 = file2.stat().st_mtime
        size2 = file2.stat().st_size

        cache.set(str(file1), "hash1", size1, mtime1)
        cache.set(str(file2), "hash2", size2, mtime2)

        results = cache.batch_check([str(file1), str(file2)])

        assert results[str(file1)][1] is True
        assert results[str(file2)][1] is True
        assert results[str(file1)][0] == "hash1"
        assert results[str(file2)][0] == "hash2"

    def test_batch_check_computes_for_changed_files(self, tmp_path):
        cache = HashCache(cache_dir=tmp_path)

        file1 = tmp_path / "file1.py"
        file1.write_text("content1")
        file2 = tmp_path / "file2.py"
        file2.write_text("content2")

        mtime1 = file1.stat().st_mtime
        size1 = file1.stat().st_size

        cache.set(str(file1), "old_hash", size1, mtime1)

        file1.write_text("modified content1")

        results = cache.batch_check([str(file1), str(file2)])

        assert results[str(file1)][1] is False
        assert results[str(file2)][1] is False

    def test_get_stale_entries_returns_deleted_files(self, tmp_path):
        cache = HashCache(cache_dir=tmp_path)

        file1 = tmp_path / "file1.py"
        file1.write_text("content1")
        file2 = tmp_path / "file2.py"
        file2.write_text("content2")

        mtime1 = file1.stat().st_mtime
        size1 = file1.stat().st_size
        mtime2 = file2.stat().st_mtime
        size2 = file2.stat().st_size

        cache.set(str(file1), "hash1", size1, mtime1)
        cache.set(str(file2), "hash2", size2, mtime2)

        file2.unlink()

        stale = cache.get_stale_entries()

        assert len(stale) == 1
        assert stale[0].file_path == str(file2)

    def test_get_stale_entries_returns_modified_files(self, tmp_path):
        cache = HashCache(cache_dir=tmp_path)

        file1 = tmp_path / "file1.py"
        file1.write_text("original content")
        time.sleep(0.01)
        mtime1 = file1.stat().st_mtime
        size1 = file1.stat().st_size

        cache.set(str(file1), "hash1", size1, mtime1)

        file1.write_text("modified content")
        time.sleep(0.01)

        stale = cache.get_stale_entries()

        assert len(stale) == 1
        assert stale[0].file_path == str(file1)

    def test_get_stale_returns_empty_for_valid_cache(self, tmp_path):
        cache = HashCache(cache_dir=tmp_path)

        file1 = tmp_path / "file1.py"
        file1.write_text("content1")
        file2 = tmp_path / "file2.py"
        file2.write_text("content2")

        mtime1 = file1.stat().st_mtime
        size1 = file1.stat().st_size
        mtime2 = file2.stat().st_mtime
        size2 = file2.stat().st_size

        cache.set(str(file1), "hash1", size1, mtime1)
        cache.set(str(file2), "hash2", size2, mtime2)

        stale = cache.get_stale_entries()

        assert len(stale) == 0

    def test_cleanup_stale_removes_deleted_and_modified(self, tmp_path):
        cache = HashCache(cache_dir=tmp_path)

        file1 = tmp_path / "file1.py"
        file1.write_text("content1")
        file2 = tmp_path / "file2.py"
        file2.write_text("content2")
        file3 = tmp_path / "file3.py"
        file3.write_text("content3")
        time.sleep(0.01)

        mtime1 = file1.stat().st_mtime
        size1 = file1.stat().st_size
        mtime2 = file2.stat().st_mtime
        size2 = file2.stat().st_size
        mtime3 = file3.stat().st_mtime
        size3 = file3.stat().st_size

        cache.set(str(file1), "hash1", size1, mtime1)
        cache.set(str(file2), "hash2", size2, mtime2)
        cache.set(str(file3), "hash3", size3, mtime3)

        file2.unlink()
        file1.write_text("modified")
        time.sleep(0.01)

        count = cache.cleanup_stale()

        assert count == 2
        assert cache.get(str(file1)) is None
        assert cache.get(str(file2)) is None
        assert cache.get(str(file3)) is not None


class TestCacheStats:
    def test_hit_rate_with_no_requests(self):
        stats = CacheStats(
            total_entries=0,
            valid_entries=0,
            stale_entries=0,
            hit_count=0,
            miss_count=0,
        )

        assert stats.hit_rate == 0.0

    def test_hit_rate_with_only_hits(self):
        stats = CacheStats(
            total_entries=10,
            valid_entries=10,
            stale_entries=0,
            hit_count=100,
            miss_count=0,
        )

        assert stats.hit_rate == 1.0

    def test_hit_rate_with_mixed_requests(self):
        stats = CacheStats(
            total_entries=10,
            valid_entries=8,
            stale_entries=2,
            hit_count=80,
            miss_count=20,
        )

        assert stats.hit_rate == 0.8

    def test_stats_structure(self):
        stats = CacheStats(
            total_entries=5,
            valid_entries=4,
            stale_entries=1,
            hit_count=10,
            miss_count=5,
        )

        assert stats.total_entries == 5
        assert stats.valid_entries == 4
        assert stats.stale_entries == 1
        assert stats.hit_count == 10
        assert stats.miss_count == 5
